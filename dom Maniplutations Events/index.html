<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JavaScript DOM Selection, Manipulation, and Events - Editable</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>JavaScript DOM Selection, Manipulation, and Events - Editable</h1>
    
    <!-- Interactive Demo Section -->
    <section class="section">
      <h2>Interactive Demo</h2>
      <p>Below is an interactive area to test DOM manipulation and events. Enter text in the input, click the button, or press Enter to update the paragraph. Hover over the container to see a background change.</p>
      <div id="container" class="demo-container">
        <h1 id="main-title">Welcome</h1>
        <input id="my-input" type="text" placeholder="Enter text">
        <button id="my-button">Update</button>
        <p class="highlight">Initial text</p>
      </div>
    </section>

    <!-- DOM Selection Section -->
    <section class="section">
      <h2>DOM Selection</h2>
      <p>The DOM represents an HTML document as a tree of nodes, allowing JavaScript to interact with it. Use methods like <code>getElementById</code> and <code>querySelector</code> to select elements. Edit the code below and click "Run" to see the output.</p>
      
      <h3>getElementById</h3>
      <p>This code selects an element with the ID <code>main-title</code> using <code>getElementById</code> and logs it to the console. It targets a single element by its unique ID.</p>
      <textarea id="getelement-code">const title = document.getElementById("main-title");
console.log(title);</textarea>
      <button onclick="runCode('getelement-code', 'getelement-output')">Run</button>
      <p id="getelement-output" class="output"></p>

      <h3>querySelector</h3>
      <p>This code uses <code>querySelector</code> to select the first <code>&lt;p&gt;</code> element and an element with the class <code>highlight</code>. It’s flexible, using any CSS selector.</p>
      <textarea id="queryselector-code">const firstPara = document.querySelector("p");
const classElement = document.querySelector(".highlight");
console.log(firstPara);
console.log(classElement);</textarea>
      <button onclick="runCode('queryselector-code', 'queryselector-output')">Run</button>
      <p id="queryselector-output" class="output"></p>

      <h3>querySelectorAll</h3>
      <p>This code uses <code>querySelectorAll</code> to select all <code>&lt;p&gt;</code> elements, returning a NodeList. It iterates over them with <code>forEach</code> to log their text content.</p>
      <textarea id="queryselectorall-code">const allParas = document.querySelectorAll("p");
allParas.forEach(p => console.log(p.textContent));</textarea>
      <button onclick="runCode('queryselectorall-code', 'queryselectorall-output')">Run</button>
      <p id="queryselectorall-output" class="output"></p>
    </section>

    <!-- DOM Manipulation Section -->
    <section class="section">
      <h2>DOM Manipulation</h2>
      <p>Once elements are selected, you can modify their content, attributes, or styles. Edit the code and run to test manipulation techniques.</p>

      <h3>Changing Text Content</h3>
      <p>This code uses <code>textContent</code> and <code>innerText</code> to change the text of the element with ID <code>main-title</code>. <code>textContent</code> ignores HTML tags, while <code>innerText</code> respects CSS display properties.</p>
      <textarea id="textcontent-code">const title = document.getElementById("main-title");
title.textContent = "New Title";
title.innerText = "Updated Title";
console.log(title.innerText);</textarea>
      <button onclick="runCode('textcontent-code', 'textcontent-output')">Run</button>
      <p id="textcontent-output" class="output"></p>

      <h3>Changing HTML Content</h3>
      <p>This code uses <code>innerHTML</code> to set HTML content inside the first <code>&lt;p&gt;</code> element, adding a <code>&lt;strong&gt;</code> tag and additional text.</p>
      <textarea id="innerhtml-code">const firstPara = document.querySelector("p");
firstPara.innerHTML = "<strong>Bold text</strong> and more";
console.log(firstPara.innerHTML);</textarea>
      <button onclick="runCode('innerhtml-code', 'innerhtml-output')">Run</button>
      <p id="innerhtml-output" class="output"></p>

      <h3>Changing Styles</h3>
      <p>This code modifies the CSS styles of the element with ID <code>main-title</code> using the <code>style</code> property to change its color and font size.</p>
      <textarea id="styles-code">const title = document.getElementById("main-title");
title.style.color = "blue";
title.style.fontSize = "24px";
console.log(title.style.color);</textarea>
      <button onclick="runCode('styles-code', 'styles-output')">Run</button>
      <p id="styles-output" class="output"></p>

      <h3>Modifying Classes</h3>
      <p>This code uses <code>classList</code> to add, remove, and toggle the <code>active</code> and <code>highlight</code> classes on an element with the class <code>highlight</code>.</p>
      <textarea id="classes-code">const classElement = document.querySelector(".highlight");
classElement.classList.add("active");
classElement.classList.remove("highlight");
classElement.classList.toggle("visible");
console.log(classElement.className);</textarea>
      <button onclick="runCode('classes-code', 'classes-output')">Run</button>
      <p id="classes-output" class="output"></p>

      <h3>Modifying Attributes</h3>
      <p>This code changes the ID of the <code>main-title</code> element using <code>setAttribute</code> and direct property access, then logs the new ID.</p>
      <textarea id="attributes-code">const title = document.getElementById("main-title");
title.setAttribute("id", "new-title");
const firstPara = document.querySelector("p");
firstPara.id = "para1";
console.log(title.getAttribute("id"));
console.log(firstPara.id);</textarea>
      <button onclick="runCode('attributes-code', 'attributes-output')">Run</button>
      <p id="attributes-output" class="output"></p>
    </section>

    <!-- Events & Listeners Section -->
    <section class="section">
      <h2>Events & Listeners</h2>
      <p>Events are user or system actions (e.g., clicks, key presses) that JavaScript can respond to using <code>addEventListener</code>. Edit the code to experiment with event handlers.</p>

      <h3>Click Event</h3>
      <p>This code adds a click event listener to the button with ID <code>my-button</code>, changing the text and color of the <code>main-title</code> element when clicked.</p>
      <textarea id="clickevent-code">const button = document.querySelector("#my-button");
const title = document.getElementById("main-title");
button.addEventListener("click", () => {
  title.textContent = "Button Clicked!";
  title.style.color = "red";
});
console.log("Click the Update button to see the effect.");</textarea>
      <button onclick="runCode('clickevent-code', 'clickevent-output')">Run</button>
      <p id="clickevent-output" class="output"></p>

      <h3>Keydown Event</h3>
      <p>This code adds a keydown event listener to the input with ID <code>my-input</code>. When the Enter key is pressed, it updates the first <code>&lt;p&gt;</code> element’s text with the input value.</p>
      <textarea id="keydownevent-code">const input = document.querySelector("#my-input");
const firstPara = document.querySelector("p");
input.addEventListener("keydown", (event) => {
  if (event.key === "Enter") {
    firstPara.textContent = input.value;
    input.value = "";
  }
});
console.log("Type in the input and press Enter to see the effect.");</textarea>
      <button onclick="runCode('keydownevent-code', 'keydownevent-output')">Run</button>
      <p id="keydownevent-output" class="output"></p>

      <h3>Event Object</h3>
      <p>This code adds a click event listener to the button with ID <code>my-button</code>, using the event object to change the button’s background color and log its target.</p>
      <textarea id="eventobject-code">const button = document.querySelector("#my-button");
button.addEventListener("click", (event) => {
  event.target.style.backgroundColor = "green";
  console.log(event.target);
});</textarea>
      <button onclick="runCode('eventobject-code', 'eventobject-output')">Run</button>
      <p id="eventobject-output" class="output"></p>

      <h3>Removing Event Listeners</h3>
      <p>This code adds a named click event listener to the button with ID <code>my-button</code> and then removes it using <code>removeEventListener</code>. The effect is logged to the console.</p>
      <textarea id="removeevent-code">const button = document.querySelector("#my-button");
const clickHandler = () => {
  console.log("Button clicked!");
};
button.addEventListener("click", clickHandler);
button.removeEventListener("click", clickHandler);
console.log("Event listener added and removed. Click the button to confirm no action.");</textarea>
      <button onclick="runCode('removeevent-code', 'removeevent-output')">Run</button>
      <p id="removeevent-output" class="output"></p>
    </section>

    <!-- Practical Example Section -->
    <section class="section">
      <h2>Practical Example</h2>
      <p>This code combines DOM selection, manipulation, and events to create an interactive feature. It updates a paragraph based on button clicks or Enter key presses in an input, and changes the container’s background on hover. Edit the code or use the demo above to test.</p>
      <textarea id="practical-code">const container = document.querySelector("#container");
const updateButton = document.querySelector("#my-button");
const textInput = document.querySelector("#my-input");
const paragraph = document.querySelector(".highlight");

updateButton.addEventListener("click", () => {
  paragraph.textContent = textInput.value || "No input provided";
  paragraph.style.color = "purple";
  paragraph.classList.add("active");
  textInput.value = "";
});

textInput.addEventListener("keydown", (event) => {
  if (event.key === "Enter") {
    paragraph.innerHTML = `<em>${textInput.value}</em>`;
    paragraph.style.fontSize = "18px";
    textInput.value = "";
  }
});

container.addEventListener("mouseover", () => {
  container.style.backgroundColor = "#f0f0f0";
});
container.addEventListener("mouseout", () => {
  container.style.backgroundColor = "";
});
console.log("Try the demo above to see the effects.");</textarea>
      <button onclick="runCode('practical-code', 'practical-output')">Run Code</button>
      <p id="practical-output" class="output"></p>
    </section>
  </div>

  <script>
    // Function to run user-edited code
    function runCode(codeId, outputId) {
      const code = document.getElementById(codeId).value;
      const outputElement = document.getElementById(outputId);
      try {
        // Redirect console.log to capture output
        let consoleOutput = [];
        const originalConsoleLog = console.log;
        console.log = (...args) => {
          consoleOutput.push(args.map(item => JSON.stringify(item, null, 2)).join(" "));
          originalConsoleLog.apply(console, args);
        };
        
        // Evaluate the code
        eval(code);
        
        // Display captured output
        outputElement.textContent = consoleOutput.join("\n") || "No output";
        outputElement.classList.remove("error");
        
        // Restore console.log
        console.log = originalConsoleLog;
      } catch (error) {
        outputElement.textContent = `Error: ${error.message}`;
        outputElement.classList.add("error");
      }
    }
  </script>
</body>
</html>